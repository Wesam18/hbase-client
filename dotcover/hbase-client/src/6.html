<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\projects\github\wesam18\hbase-client\src\_specs\features\hbasestargateclient.feature</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
Feature: HBase Stargate Client
	In order to read and write HBase data
	As an application developer
	I want access to all available REST operations on HBase Stargate via a managed client API

Background:
	Given I have everything I need to test a disconnected HBase client, with the following options:
		| server URL              | content type | false row key |
		| http://test-server:9999 | text/xml     | row           |
	And I have everything I need to test a content converter for XML
	And I have an HBase client

Scenario Outline: Create a table
	Given I have created a new table schema
	And I have set my table schema&#39;s name to &quot;&lt;table&gt;&quot;
	And I have added a column named &quot;&lt;column&gt;&quot; to my table schema
	When I create a table using my table schema
	Then the operation &lt;should or should not&gt; have succeeded
	And if the operation succeeded, a REST request for schema updates should have been submitted with the correct &lt;method&gt;, &lt;resource&gt;, &lt;table&gt;, and &lt;column&gt;
	And if there was an exception, it should have been the expected &lt;exception&gt; type
	And if there was an exception, it should have had the expected exception &lt;message&gt;
Examples:
	| table  | column | method | resource    | should or should not | exception         | message                                      |
	| {null} | {null} | PUT    |             | should not           | ArgumentException | ResourceBuilder_MinimumForSchemaUpdateNotMet |
	| {null} |        | PUT    |             | should not           | ArgumentException | ResourceBuilder_MinimumForSchemaUpdateNotMet |
	|        | {null} | PUT    |             | should not           | ArgumentException | ResourceBuilder_MinimumForSchemaUpdateNotMet |
	|        |        | PUT    |             | should not           | ArgumentException | ResourceBuilder_MinimumForSchemaUpdateNotMet |
	| test   |        | PUT    | test/schema | should not           | ArgumentException | ErrorProvider_ColumnNameMissing              |

Scenario Outline: Write a single value
	Given I have an identifier consisting of a &lt;table&gt;, a &lt;row&gt;, a &lt;column&gt;, a &lt;qualifier&gt;, and a &lt;timestamp&gt;
	When I write the value &quot;hello world&quot; using my identifier
	Then a REST request should have been submitted with the correct &lt;method&gt; and &lt;resource&gt;
	And the REST request should have contained 1 cell
	And one of the cells in the REST request should have had the value &quot;hello world&quot;
Examples:
	| table | row | column | qualifier | timestamp | method | resource         |
	| test  | 1   | alpha  |           |           | POST   | test/1/alpha     |
	| test  | 1   | alpha  | x         |           | POST   | test/1/alpha:x   |
	| test  | 1   | alpha  |           | 4         | POST   | test/1/alpha/4   |
	| test  | 1   | alpha  | x         | 4         | POST   | test/1/alpha:x/4 |

Scenario: Write multiple values
	Given I have created a set of cells for the &quot;test&quot; table
	And I have added cells to my set with the following properties:
		| row | column | qualifier | value       |
		| 1   | beta   | x         | hello world |
		| 1   | beta   | y         | dlrow olleh |
		| 1   | beta   | z         | lorum ipsum |
	When I write the set of cells
	Then a REST request should have been submitted with the following values:
		| method | resource |
		| POST   | test/row |
	And the REST request should have contained 3 cells
	And the cells in the REST request should have had the following values:
		| row | column | qualifier | value       |
		| 1   | beta   | x         | hello world |
		| 1   | beta   | y         | dlrow olleh |
		| 1   | beta   | z         | lorum ipsum |

Scenario Outline: Read a row
	Given I have a cell query consisting of a &lt;table&gt;, a &lt;row&gt;, a &lt;column&gt;, a &lt;qualifier&gt;, a &lt;begin&gt; timestamp, a &lt;end&gt; timestamp, and a &lt;max&gt; number of versions
	When I read a row using my query
	Then a REST request should have been submitted with the correct &lt;method&gt; and &lt;resource&gt;
Examples:
	| table | row | column | qualifier | begin | end | max | method | resource               |
	| test  | 1   |        |           |       |     |     | GET    | test/1                 |
	| test  | 1   |        |           |       |     | 2   | GET    | test/1?v=2             |
	| test  | 1   |        |           |       | 5   |     | GET    | test/1/*/5             |
	| test  | 1   |        |           |       | 5   | 2   | GET    | test/1/*/5?v=2         |
	| test  | 1   |        |           | 4     |     |     | GET    | test/1                 |
	| test  | 1   |        |           | 4     |     | 2   | GET    | test/1?v=2             |
	| test  | 1   |        |           | 4     | 5   |     | GET    | test/1/*/4,5           |
	| test  | 1   |        |           | 4     | 5   | 2   | GET    | test/1/*/4,5?v=2       |
	| test  | 1   |        | x         |       |     |     | GET    | test/1                 |
	| test  | 1   |        | x         |       |     | 2   | GET    | test/1?v=2             |
	| test  | 1   |        | x         |       | 5   |     | GET    | test/1/*/5             |
	| test  | 1   |        | x         |       | 5   | 2   | GET    | test/1/*/5?v=2         |
	| test  | 1   |        | x         | 4     |     |     | GET    | test/1                 |
	| test  | 1   |        | x         | 4     |     | 2   | GET    | test/1?v=2             |
	| test  | 1   |        | x         | 4     | 5   |     | GET    | test/1/*/4,5           |
	| test  | 1   |        | x         | 4     | 5   | 2   | GET    | test/1/*/4,5?v=2       |
	| test  | 1   | alpha  |           |       |     |     | GET    | test/1/alpha           |
	| test  | 1   | alpha  |           |       |     | 2   | GET    | test/1/alpha?v=2       |
	| test  | 1   | alpha  |           |       | 5   |     | GET    | test/1/alpha/5         |
	| test  | 1   | alpha  |           |       | 5   | 2   | GET    | test/1/alpha/5?v=2     |
	| test  | 1   | alpha  |           | 4     |     |     | GET    | test/1/alpha           |
	| test  | 1   | alpha  |           | 4     |     | 2   | GET    | test/1/alpha?v=2       |
	| test  | 1   | alpha  |           | 4     | 5   |     | GET    | test/1/alpha/4,5       |
	| test  | 1   | alpha  |           | 4     | 5   | 2   | GET    | test/1/alpha/4,5?v=2   |
	| test  | 1   | alpha  | x         |       |     |     | GET    | test/1/alpha:x         |
	| test  | 1   | alpha  | x         |       |     | 2   | GET    | test/1/alpha:x?v=2     |
	| test  | 1   | alpha  | x         |       | 5   |     | GET    | test/1/alpha:x/5       |
	| test  | 1   | alpha  | x         |       | 5   | 2   | GET    | test/1/alpha:x/5?v=2   |
	| test  | 1   | alpha  | x         | 4     |     |     | GET    | test/1/alpha:x         |
	| test  | 1   | alpha  | x         | 4     |     | 2   | GET    | test/1/alpha:x?v=2     |
	| test  | 1   | alpha  | x         | 4     | 5   |     | GET    | test/1/alpha:x/4,5     |
	| test  | 1   | alpha  | x         | 4     | 5   | 2   | GET    | test/1/alpha:x/4,5?v=2 |
	
Scenario Outline: Read a single value
	Given I have an identifier consisting of a &lt;table&gt;, a &lt;row&gt;, a &lt;column&gt;, and a &lt;qualifier&gt;
	When I read a single value using my identifier
	Then a REST request should have been submitted with the correct &lt;method&gt; and &lt;resource&gt;
Examples:
	| table | row | column | qualifier | method | resource           |
	| test  | 1   | alpha  |           | GET    | test/1/alpha?v=1   |
	| test  | 1   | alpha  | x         | GET    | test/1/alpha:x?v=1 |

Scenario: Read a row with expected data
	Given I will always get a response with a status of &quot;OK&quot; and content equivalent to the resource called &quot;HBaseXml_1Alpha_HelloWorld&quot;
	When I read all cells from the &quot;test&quot; table
	Then one of the cells in my set should have the following properties:
        | table | row | column | qualifier | value       |
        | test  | 1   | alpha  |           | hello world |

Scenario: Create a scanner
	Given I will always get a response with a status of &quot;OK&quot; and a location header of &quot;http://someurl.com/test/scanner/abc123&quot;
	When I create a scanner for the &quot;test&quot; table
	Then a REST request should have been submitted with the following values:
		| method | resource     |
		| PUT    | test/scanner |
	And my scanner should have a resource set to &quot;test/scanner/abc123&quot;

Scenario: Read a result from a scanner
	Given I have a scanner for the &quot;test&quot; table named &quot;abc123&quot;
	And I will always get a response with a status of &quot;OK&quot; and content equivalent to the resource called &quot;HBaseXml_1Alpha_HelloWorld&quot;
	When I read a result from the scanner
	Then a REST request should have been submitted with the following values:
		| method | resource            |
		| GET    | test/scanner/abc123 |
	And one of the cells in my set should have the following properties:
        | table |
        | test  |

Scenario: Delete a scanner
	Given I have a scanner for the &quot;test&quot; table named &quot;abc123&quot;
	When I delete the scanner
	Then a REST request should have been submitted with the following values:
		| method | resource            |
		| DELETE | test/scanner/abc123 |

Scenario: Enumerate all tables
	When I read the names of all tables
	Then a REST request should have been submitted with the following values:
		| method | resource |
		| GET    |          |

Scenario: Get table schema
	Given I will always get a response with a status of &quot;OK&quot; and content equivalent to the resource called &quot;HBaseXml_TableSchema1&quot;
	When I get the schema of the &quot;test&quot; table
	Then a REST request should have been submitted with the following values:
		| method | resource    |
		| GET    | test/schema |

Scenario Outline: Delete a row, columm, or cell
	And I have an identifier consisting of a &lt;table&gt;, a &lt;row&gt;, a &lt;column&gt;, a &lt;qualifier&gt;, and a &lt;timestamp&gt;
	When I delete an item using my identifier
	Then a REST request should have been submitted with the correct &lt;method&gt; and &lt;resource&gt;
Examples:
	| table | row | column | qualifier | timestamp | method | resource         |
	| test  | 1   |        |           |           | DELETE | test/1           |
	| test  | 1   | alpha  |           |           | DELETE | test/1/alpha     |
	| test  | 1   | alpha  | x         |           | DELETE | test/1/alpha:x   |
	| test  | 1   | alpha  |           | 4         | DELETE | test/1/alpha/4   |
	| test  | 1   | alpha  | x         | 4         | DELETE | test/1/alpha:x/4 |

Scenario: Delete a table
	When I delete the &quot;test&quot; table
	Then a REST request should have been submitted with the following values:
		| method | resource    |
		| DELETE | test/schema |

Scenario: Find cells with an empty table
	Given I will always get a response with a status of &quot;NotFound&quot; and content equivalent to the resource called &quot;HBaseXml_FindCellsEmptyResponse&quot;
	When I read all cells from the &quot;test&quot; table
	Then my set should contain 0 cells

Scenario: No Server Response
	Given I will always get a response with a response status of &quot;Error&quot; and error message equivalent to the resource called &quot;NoServerResponse&quot;
	When I get the schema of the &quot;test&quot; table
	Then a REST request should have been submitted with the following values:
		| method | resource    |
		| GET    | test/schema |
	And there should have been a WebException with a message equivalent to the resource called &quot;NoServerResponse&quot;
    </pre>
    <script type="text/javascript">
      highlightRanges([[7,2,8,69,1],[10,2,10,142,1],[11,2,11,104,1],[13,1,13,34,1],[6,1,6,26,1],[14,2,14,119,1],[15,2,15,149,1],[16,2,16,159,1],[17,2,17,122,1],[18,2,18,150,1],[19,2,20,2,1],[20,2,20,176,1],[21,2,21,178,1],[30,1,30,34,1],[6,1,6,26,1],[31,2,31,215,1],[32,2,32,137,1],[33,2,33,187,1],[34,2,34,127,1],[35,2,35,160,1],[43,1,43,34,1],[6,1,6,26,1],[44,2,44,138,1],[45,2,45,114,1],[50,2,50,108,1],[51,2,51,125,1],[54,2,54,128,1],[55,2,55,122,1],[61,1,61,34,1],[6,1,6,26,1],[62,2,63,2,1],[63,111,63,184,1],[63,2,63,111,1],[64,2,64,187,1],[100,1,100,34,1],[6,1,6,26,1],[101,2,101,197,1],[102,2,102,125,1],[103,2,103,187,1],[109,1,109,34,1],[6,1,6,26,1],[110,2,111,2,1],[111,124,111,134,1],[111,2,111,124,1],[112,2,112,121,1],[116,1,116,34,1],[6,1,6,26,1],[117,2,118,2,1],[118,2,118,125,1],[119,2,119,125,1],[122,2,122,146,1],[124,1,124,34,1],[6,1,6,26,1],[125,2,125,142,1],[126,2,127,2,1],[127,116,127,132,1],[127,2,127,116,1],[128,2,128,125,1],[131,2,131,119,1],[135,1,135,34,1],[6,1,6,26,1],[136,2,136,142,1],[137,2,137,104,1],[138,2,138,125,1],[142,1,142,34,1],[6,1,6,26,1],[143,2,143,114,1],[144,2,144,126,1],[148,1,148,34,1],[6,1,6,26,1],[149,2,150,2,1],[150,122,150,129,1],[150,2,150,122,1],[151,2,151,126,1],[155,1,155,34,1],[6,1,6,26,1],[156,2,156,211,1],[157,2,157,120,1],[158,2,158,187,1],[167,1,167,34,1],[6,1,6,26,1],[168,2,168,111,1],[169,2,169,126,1],[173,1,173,34,1],[6,1,6,26,1],[174,2,175,2,1],[175,124,175,145,1],[175,2,175,124,1],[176,2,176,113,1],[178,1,178,34,1],[6,1,6,26,1],[179,2,180,2,1],[180,122,180,142,1],[180,2,180,122,1],[181,2,181,126,1],[184,2,185,112,1]]);
    </script>
  </body>
</html>